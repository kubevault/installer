/*
Copyright The KubeVault Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/


// This file was autogenerated by go-to-protobuf. Do not edit it manually!

syntax = 'proto2';

package kubevault.dev.installer.apis.installer.v1alpha1;

import "k8s.io/api/core/v1/generated.proto";
import "k8s.io/apimachinery/pkg/apis/meta/v1/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/schema/generated.proto";

// Package-wide variables from generator "generated".
option go_package = "v1alpha1";

message CSIDriverAPIServer {
  optional bool useKubeapiserverFqdnForAks = 1;

  optional HealthcheckSpec healthcheck = 2;
}

message CSIDriverMonitoring {
  optional string agent = 1;

  optional bool node = 2;

  optional bool controller = 3;

  optional PrometheusSpec prometheus = 4;

  optional ServiceMonitorLabels serviceMonitor = 5;
}

message CSIDriverRBAC {
  optional bool create = 1;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=csivaults,singular=csivault,categories={kubevault,appscode}
message CSIVault {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional CSIVaultSpec spec = 2;
}

// CSIVaultList is a list of CSIVaults
message CSIVaultList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // Items is a list of CSIVault CRD objects
  repeated CSIVault items = 2;
}

// CSIVaultSpec is the schema for CSI Vault Driver values file
message CSIVaultSpec {
  optional string nameOverride = 1;

  optional string fullnameOverride = 2;

  optional DriverComponent attacher = 3;

  optional DriverComponent plugin = 4;

  optional DriverComponent provisioner = 5;

  optional DriverComponent nodeRegistrar = 6;

  optional ComponentList components = 7;

  optional string driverName = 8;

  optional string pluginAddress = 9;

  optional string pluginDir = 10;

  // +optional
  repeated string imagePullSecrets = 11;

  // +optional
  optional bool criticalAddon = 12;

  // +optional
  optional int32 logLevel = 13;

  // +optional
  map<string, string> annotations = 14;

  // +optional
  map<string, string> podAnnotations = 15;

  // +optional
  map<string, string> nodeSelector = 16;

  // If specified, the pod's tolerations.
  // +optional
  repeated k8s.io.api.core.v1.Toleration tolerations = 17;

  // If specified, the pod's scheduling constraints
  // +optional
  optional k8s.io.api.core.v1.Affinity affinity = 18;

  optional CSIDriverRBAC rbac = 19;

  // PodSecurityContext holds pod-level security attributes and common container settings.
  // Optional: Defaults to empty.  See type description for default values of each field.
  // +optional
  optional k8s.io.api.core.v1.PodSecurityContext podSecurityContext = 20;

  optional CSIDriverAPIServer apiserver = 21;

  // +optional
  optional bool enableAnalytics = 22;

  optional CSIDriverMonitoring monitoring = 23;
}

message ComponentList {
  optional string controller = 1;

  optional string node = 2;
}

message Container {
  optional ImageRef imageRef = 1;

  // Compute Resources required by the sidecar container.
  // +optional
  optional k8s.io.api.core.v1.ResourceRequirements resources = 2;

  // Security options the pod should run with.
  // +optional
  optional k8s.io.api.core.v1.SecurityContext securityContext = 3;
}

message DriverComponent {
  optional string name = 1;

  optional ImageRef imageRef = 2;

  optional string pullPolicy = 3;

  // Compute Resources required by the sidecar container.
  // +optional
  optional k8s.io.api.core.v1.ResourceRequirements resources = 4;

  // Security options the pod should run with.
  // +optional
  optional k8s.io.api.core.v1.SecurityContext securityContext = 5;
}

message HealthcheckSpec {
  // +optional
  optional bool enabled = 1;
}

message ImageRef {
  optional string registry = 1;

  optional string repository = 2;

  optional string tag = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=kubevaultoperators,singular=kubevaultoperator,categories={kubevault,appscode}
message KubeVaultOperator {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional KubeVaultOperatorSpec spec = 2;
}

// KubeVaultOperatorList is a list of KubeVaultOperators
message KubeVaultOperatorList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // Items is a list of KubeVaultOperator CRD objects
  repeated KubeVaultOperator items = 2;
}

// KubeVaultOperatorSpec is the schema for KubeVault operator values file
message KubeVaultOperatorSpec {
  // +optional
  optional string nameOverride = 1;

  // +optional
  optional string fullnameOverride = 2;

  optional int32 replicaCount = 3;

  optional Container operator = 4;

  optional ImageRef cleaner = 5;

  optional string imagePullPolicy = 6;

  // +optional
  repeated string imagePullSecrets = 7;

  // +optional
  optional bool criticalAddon = 8;

  // +optional
  optional int32 logLevel = 9;

  // +optional
  map<string, string> annotations = 10;

  // +optional
  map<string, string> nodeSelector = 11;

  // +optional
  map<string, string> podAnnotations = 12;

  // If specified, the pod's tolerations.
  // +optional
  repeated k8s.io.api.core.v1.Toleration tolerations = 13;

  // If specified, the pod's scheduling constraints
  // +optional
  optional k8s.io.api.core.v1.Affinity affinity = 14;

  // PodSecurityContext holds pod-level security attributes and common container settings.
  // Optional: Defaults to empty.  See type description for default values of each field.
  // +optional
  optional k8s.io.api.core.v1.PodSecurityContext podSecurityContext = 15;

  optional ServiceAccountSpec serviceAccount = 16;

  optional OperatorWebhookServer apiserver = 17;

  // +optional
  optional bool enableAnalytics = 18;

  optional OperatorMonitoring monitoring = 19;

  // +optional
  optional string clusterName = 20;
}

message OperatorMonitoring {
  optional string agent = 1;

  // +optional
  optional bool operator = 2;

  optional PrometheusSpec prometheus = 3;

  optional ServiceMonitorLabels serviceMonitor = 4;
}

message OperatorWebhookServer {
  optional int32 groupPriorityMinimum = 1;

  optional int32 versionPriority = 2;

  optional bool enableMutatingWebhook = 3;

  optional bool enableValidatingWebhook = 4;

  optional string ca = 5;

  // +optional
  optional bool bypassValidatingWebhookXray = 6;

  optional bool useKubeapiserverFqdnForAks = 7;

  optional HealthcheckSpec healthcheck = 8;

  optional ServingCerts servingCerts = 9;
}

message PrometheusSpec {
  // +optional
  optional string namespace = 1;
}

message RegistryRef {
  optional string registry = 1;
}

message ServiceAccountSpec {
  optional bool create = 1;

  // +optional
  optional string name = 2;

  // +optional
  map<string, string> annotations = 3;
}

message ServiceMonitorLabels {
  // +optional
  map<string, string> labels = 1;
}

message ServingCerts {
  optional bool generate = 1;

  // +optional
  optional string caCrt = 2;

  // +optional
  optional string serverCrt = 3;

  // +optional
  optional string serverKey = 4;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=vaultcatalogs,singular=vaultcatalog,categories={kubevault,appscode}
message VaultCatalog {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional VaultCatalogSpec spec = 2;
}

// VaultCatalogList is a list of VaultCatalogs
message VaultCatalogList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  // Items is a list of VaultCatalog CRD objects
  repeated VaultCatalog items = 2;
}

// VaultCatalogSpec is the schema for Vault Catalog values file
message VaultCatalogSpec {
  // +optional
  optional string nameOverride = 1;

  // +optional
  optional string fullnameOverride = 2;

  optional RegistryRef image = 3;
}

